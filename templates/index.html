<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSMECON - Event Check</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body class="page-index">

<div class="container">

    <!-- HEADER -->
    <div class="header">
        <div class="logo" id="logoContainer">
            <img src="{{ url_for('static', filename='osmania-logo.jpeg') }}" alt="OSMECON Logo" id="logoImg">
        </div>
        <div class="university-name">OSMECON</div>
        <div class="subtitle">Check your registered events</div>
    </div>

    <!-- FORM -->
    <form method="POST" action="/check" id="eventCheckForm">
        <div class="form-group">
            <label for="student_id">Student ID</label>
            <div class="input-group">
                <span class="prefix">OSMEC-</span>
                <input type="text"
                       id="student_id"
                       name="student_id"
                       required
                       inputmode="numeric"
                       autocomplete="off">
            </div>
        </div>

        <button type="submit" id="submitBtn">View My Events</button>
    </form>

    <!-- ACTION BUTTONS -->
    <button class="pdf-button" onclick="window.location.href='/schedule'">
        ğŸ“… View Event Schedule
    </button>

    <button class="prayer-button" onclick="openPrayerPopup()">
        ğŸ•Œ Prayer Room
    </button>

    {% if error and message %}
    <div class="error-container">{{ message }}</div>
    {% endif %}

</div>

<!-- PRAYER MODAL -->
<div id="prayerModal" class="prayer-modal">
    <div class="prayer-modal-content">
        <div class="prayer-modal-header">
            <h3>ğŸ•Œ Prayer Room</h3>
            <button class="prayer-close" onclick="closePrayerPopup()">Ã—</button>
        </div>
        <div class="prayer-modal-body">
            <p class="location-text">ğŸ“ 2nd Floor Academic Block</p>
        </div>
    </div>
</div>

<script>
const form = document.getElementById('eventCheckForm');
const input = document.getElementById('student_id');

form.addEventListener('submit', () => {
    input.value = 'OSMEC-' + input.value.trim();
});

function openPrayerPopup() {
    document.getElementById('prayerModal').style.display = 'flex';
}
function closePrayerPopup() {
    document.getElementById('prayerModal').style.display = 'none';
}
</script>

</body>
</html>