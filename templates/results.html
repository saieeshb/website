<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSMECON - Your Events</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body class="page-results">
<div class="container">

    <!-- HEADER -->
    <div class="header-card">
        <div class="header-left">
            <div class="logo" id="logoContainer">
                <img src="{{ url_for('static', filename='osmania-logo.jpeg') }}" alt="OSMECON Logo" id="logoImg">
            </div>
            <div class="header-info">
                <div class="university-name">OSMECON</div>
                <div class="student-name">{{ student_name }}</div>
                <div class="uid-display">ID: {{ uid }}</div>
            </div>
        </div>
        <a href="/" class="change-id-btn">Change ID</a>
    </div>

    <!-- EVENTS -->
    <div class="events-section">
        {% for day, events in events_by_day %}
            <div class="section-title">ðŸ“… Day {{ day }} Schedule</div>

            <div class="events-table-container">
                <table class="events-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                        </tr>
                    </thead>
                    <tbody>

                    {% if day == 1 and workshop %}
                        <tr class="section-header-row workshop">
                            <td colspan="2">ðŸ”§ Workshop</td>
                        </tr>
                        <tr>
                            <td class="event-number">1</td>
                            <td class="event-name-cell"
                                onclick="showLocation('{{ workshop.name }}', '{{ workshop.location }}')">
                                {{ workshop.name }}
                            </td>
                        </tr>
                    {% endif %}

                    {% if events %}
                        <tr class="section-header-row events">
                            <td colspan="2">ðŸ“‹ Events</td>
                        </tr>
                    {% endif %}

                    {% for event in events %}
                        <tr>
                            <td class="event-number">{{ loop.index }}</td>
                            <td class="event-name-cell"
                                onclick="showLocation('{{ event.name }}', '{{ event.location }}')">
                                {{ event.name }}
                            </td>
                        </tr>
                    {% endfor %}

                    </tbody>
                </table>
            </div>
        {% endfor %}
    </div>

</div>

<!-- MODAL -->
<div id="locationModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modalEventName"></h2>
        </div>
        <div class="modal-body">
            <div class="location-info">
                <div class="location-text" id="modalLocation"></div>
            </div>
            <button class="close-modal" onclick="closeModal()">Close</button>
        </div>
    </div>
</div>

<script>
function showLocation(name, location) {
    document.getElementById('modalEventName').textContent = name;
    document.getElementById('modalLocation').textContent = location;
    document.getElementById('locationModal').style.display = 'block';
}

function closeModal() {
    document.getElementById('locationModal').style.display = 'none';
}
</script>

</body>
</html>